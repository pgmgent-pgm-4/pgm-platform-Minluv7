{"version":3,"sources":["../../../src/api/controllers/auth.controller.js"],"names":["login","req","res","next","passport","authenticate","err","authenticated","info","status","json","signup","logout","logoutError","session","destroy","sessionError","body","error"],"mappings":";;;;;;;;;;;;;AACA;;AAGA;;AAJA;AAGA;AAGA,IAAMA,KAAK,GAAG,SAARA,KAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChCC,uBAASC,YAAT,CAAsB,OAAtB;AAAA,6FAA+B,iBAAOC,GAAP,EAAYC,aAAZ,EAA2BC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,oBAEvBF,GAAG,IAAI,CAACC,aAFe;AAAA;AAAA;AAAA;;AAAA,oBAGnBD,GAHmB;;AAAA;AAAA,+CAMpBJ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,aAArB,CANoB;;AAAA;AAAA;AAAA;AAAA,+CAQpB,yCAAuBJ,IAAvB,CARoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA/B;;AAAA;AAAA;AAAA;AAAA,OAUGF,GAVH,EAUQC,GAVR,EAUaC,IAVb;AAWD,CAZD;;AAcA,IAAMQ,MAAM;AAAA,4FAAG,kBAAOV,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AACbC,iCAASC,YAAT,CAAsB,QAAtB;AAAA,wGAAgC,kBAAOC,GAAP,EAAYC,aAAZ,EAA2BC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,8BAExBF,GAAG,IAAI,CAACC,aAFgB;AAAA;AAAA;AAAA;;AAAA,8BAGpBD,GAHoB;;AAAA;AAAA,0DAMrBJ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,aAArB,CANqB;;AAAA;AAAA;AAAA;AAAA,0DAQrB,0CAAuBJ,IAAvB,CARqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAhC;;AAAA;AAAA;AAAA;AAAA,iBAUGF,GAVH,EAUQC,GAVR,EAUaC,IAVb;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAANQ,MAAM;AAAA;AAAA;AAAA,GAAZ;;AAcA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACX,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjC,MAAI;AACF,QAAI,OAAOF,GAAG,CAACW,MAAX,KAAsB,UAA1B,EAAsC;AACpCX,MAAAA,GAAG,CAACW,MAAJ,CAAW,UAACC,WAAD,EAAiB;AAC1B,YAAIA,WAAJ,EAAiB;AAAE,gBAAMA,WAAN;AAAoB;;AACvCZ,QAAAA,GAAG,CAACa,OAAJ,CAAYC,OAAZ,CAAoB,UAACC,YAAD,EAAkB;AACpC,cAAIA,YAAJ,EAAkB;AAAE,kBAAMA,YAAN;AAAqB;;AACzCf,UAAAA,GAAG,CAACa,OAAJ,GAAc,IAAd;AACD,SAHD;AAID,OAND;AAOD;;AACD,WAAOZ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,GAAG,CAACgB,IAAzB,CAAP;AACD,GAXD,CAWE,OAAOC,KAAP,EAAc;AACd,WAAO,4BAAgBA,KAAhB,EAAuBf,IAAvB,CAAP;AACD;AACF,CAfD;;eAiBe;AACbH,EAAAA,KAAK,EAALA,KADa;AAEbY,EAAAA,MAAM,EAANA,MAFa;AAGbD,EAAAA,MAAM,EAANA;AAHa,C","sourcesContent":["// Import external modules\nimport passport from 'passport';\n\n// Import custom modules\nimport { handleHTTPError, HTTPError } from '../../utils';\n\nconst login = (req, res, next) => {\n  passport.authenticate('login', async (err, authenticated, info) => {\n    try {\n      if (err || !authenticated) {\n        throw err;\n      }\n\n      return res.status(200).json(authenticated);\n    } catch (error) {\n      return handleHTTPError(error, next);\n    }\n  })(req, res, next);\n};\n\nconst signup = async (req, res, next) => {\n  passport.authenticate('signup', async (err, authenticated, info) => {\n    try {\n      if (err || !authenticated) {\n        throw err;\n      }\n\n      return res.status(200).json(authenticated);\n    } catch (error) {\n      return handleHTTPError(error, next);\n    }\n  })(req, res, next);\n};\n\nconst logout = (req, res, next) => {\n  try {\n    if (typeof req.logout === 'function') {\n      req.logout((logoutError) => {\n        if (logoutError) { throw logoutError; }\n        req.session.destroy((sessionError) => {\n          if (sessionError) { throw sessionError; }\n          req.session = null;\n        });\n      });\n    }\n    return res.status(200).json(req.body);\n  } catch (error) {\n    return handleHTTPError(error, next);\n  }\n};\n\nexport default {\n  login,\n  logout,\n  signup,\n};\n"],"file":"auth.controller.js"}